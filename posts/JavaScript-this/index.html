<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="JavaScript’s this" /><meta name="author" content="vgihan" /><meta property="og:locale" content="ko" /><meta name="description" content="study JavaScript this" /><meta property="og:description" content="study JavaScript this" /><link rel="canonical" href="https://vgihan.github.io/posts/JavaScript-this/" /><meta property="og:url" content="https://vgihan.github.io/posts/JavaScript-this/" /><meta property="og:site_name" content="vgihan’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-03T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JavaScript’s this" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@vgihan" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"vgihan"},"dateModified":"2022-07-03T00:00:00+09:00","datePublished":"2022-07-03T00:00:00+09:00","description":"study JavaScript this","headline":"JavaScript’s this","mainEntityOfPage":{"@type":"WebPage","@id":"https://vgihan.github.io/posts/JavaScript-this/"},"url":"https://vgihan.github.io/posts/JavaScript-this/"}</script><title>JavaScript's this | vgihan's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="vgihan's blog"><meta name="application-name" content="vgihan's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/49841765?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">vgihan's blog</a></div><div class="site-subtitle">잊지 않기 위해 기록합니다</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/vgihan" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jum654','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>JavaScript's this</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>JavaScript's this</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656774000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 3, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> Kim Gihan </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2379 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><p>js로 프로그래밍 할 때, this를 사용함에 있어서 큰 혼란을 겪었다. 같은 객체 안에서 this 키워드를 통해 내부의 메서드를 호출하거나 프로퍼티를 사용하려고 할 때, 의도한 대로 this가 결정되지 않아 어려움을 겪었고 이에 따라 필자는 this가 결정되는 원리부터 상황에 따른 this의 결정에 대해 정리하고자 한다. JavaScript의 this는 함수 호출 시 함수가 어떻게 호출 되었는지 즉 함수 호출 패턴에 따라 값이 결정된다. 함수 호출 패턴은 여러가지 상황이 있을 수 있기 때문에 각 상황 별로 this가 어디에 바인딩 되는지 알아보고, 어떻게 해결 해야 하는지 살펴보자.</p><h3 id="자바의-this-vs-자바스크립트의-this"><span class="mr-2">자바의 this vs 자바스크립트의 this</span><a href="#자바의-this-vs-자바스크립트의-this" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Java</strong></ul><p>자바에서의 this는 객체 자신의 참조 값을 갖는다. 아래 예시를 보자.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    	<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>자바에서 this는 Person으로 생성된 객체를 가리키기 때문에 주로 생성자에서 필드 변수와 파라미터를 구분하기 위해 쓰였다.</p><ul><li><strong>JavaScript</strong></ul><p>자바스크립트의 경우 this는 자바와 달리 실행 시간에 결정되는데, 이로 인해 자바에서 든 예시의 Person 클래스로 생성된 객체 내부에서 작성한 this 키워드라도 Person 객체를 가리키지 않는 상황이 일어날 수 있다.</p><h3 id="this가-결정되는-내부-구조"><span class="mr-2">this가 결정되는 내부 구조</span><a href="#this가-결정되는-내부-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>실행 컨텍스트 (Execution Context)</strong></ul><p>자바스크립트의 핵심 원리인 실행 컨텍스트 내부에서 this의 정보를 담고 있다. 함수를 호출할 때 하나의 실행 컨텍스트가 만들어져 스택에 쌓이게 된다. 실행 컨텍스트에는 변수와 함수를 담고 있는 객체를 가리키고 있는 Variable Object와 상위 스코프의 정보를 담고 있는 Scope Chain, 그리고 this의 정보를 담고 있다.</p><p><img data-src="https://images.velog.io/images/vgihan/post/aa5bdeef-e652-4cdc-8c79-18a61bae42e0/image.png" alt="" title="sadfklsf" data-proofer-ignore></p><ul><li><strong>함수 호출 시 실행 컨텍스트의 생성 과정</strong></ul><p>순서는 아래와 같고, 함수가 호출되어 하나의 실행 컨텍스트가 스택에 쌓이게 될 때 this가 한 번 결정되는 구조이다.</p><blockquote><ol><li>스코프 체인 연결<li>VO 연결<li>함수 실행 패턴에 따른 this 결정</ol></blockquote><h3 id="함수-실행-패턴"><span class="mr-2">함수 실행 패턴</span><a href="#함수-실행-패턴" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>this는 함수가 호출됐을 때마다 스택에 실행 컨텍스트가 쌓이고, 실행 컨텍스트마다 this가 결정되기 때문에 함수 호출 패턴에 따라 어디에 this가 바인딩 될지 결정된다. 그렇다면, 함수 호출 패턴에는 어떤 것이 있을까? 함수 호출 패턴은 아래와 같이 크게 4가지로 나뉜다고 한다.</p><blockquote><ol><li>함수 호출<li>메소드 호출<li>생성자 함수 호출<li>apply/call/bind 호출</ol></blockquote><h4 id="함수-호출"><span class="mr-2">함수 호출</span><a href="#함수-호출" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>기본적인 함수의 호출은 전역 객체를 가리키고 있다. 여기서 전역 객체란, 프로그램이 실행된 후 가장 먼저 EC 스택에 쌓이게 되는 Global Execution Context의 VO가 가리키고 있는 Global Object를 의미한다. <code class="language-plaintext highlighter-rouge">function fooName() {}</code> 와 같이 선언된 함수들은 기본적인 함수 호출에 해당하는데, 이는 일반적인 전역 스코프에 선언된 함수 뿐만 아니라 내부 함수, 콜백 함수로 전달된 함수 호출도 이에 해당한다. 아래 예시를 보자.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// 전역 객체</span>
<span class="p">}</span>
</pre></table></code></div></div><p>=&gt; 전역 스코프에서 선언된 함수 호출이므로 전역 객체를 가리킨다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gihan</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">foo</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// obj 객체</span>
    <span class="kd">function</span> <span class="nx">inner</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// 전역 객체</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">};</span>
</pre></table></code></div></div><p>=&gt; 이후 설명되는 메서드 호출에서는 자신을 메서드로 갖고 있는 객체를 가리키는데, 메서드 내부에서 호출한 내부 함수의 this 마저도 전역 객체를 가리킨다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// 전역 객체</span>
<span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
</pre></table></code></div></div><p>=&gt; 콜백 함수 역시 마찬가지로 전역 객체가 바인딩된다.</p><h4 id="메서드-호출"><span class="mr-2">메서드 호출</span><a href="#메서드-호출" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>함수가 객체의 프로퍼티로 존재한다면, 이는 메서드라고 불리며 this는 해당 객체를 가리키게 된다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gihan</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">foo</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// person 객체</span>
  <span class="p">},</span>
<span class="p">};</span>
</pre></table></code></div></div><h4 id="생성자-함수-호출"><span class="mr-2">생성자 함수 호출</span><a href="#생성자-함수-호출" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>생성자 함수를 알아보기 전에, new 키워드에 대해 알 필요가 있다. 자바와 같은 다른 객체 지향 언어에서 new 키워드는 객체를 동적으로 만들어내는 역할을 수행한다. 자바스크립트에서 new 키워드는, 함수를 생성자 함수로써 동작하도록 하여 함수 호출 시 새로운 객체를 만들어 낸다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">test</span><span class="p">();</span> <span class="c1">// undefined</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">test</span><span class="p">();</span> <span class="c1">// {}</span>
</pre></table></code></div></div><p>자바스크립트에서 함수는 return value를 명시하지 않을 시 undefined를 리턴한다. 하지만, 생성자 함수로써 new 키워드 이후에 함수 호출 시 해당 함수는 undefined 가 아닌 객체를 리턴하는데, 어떤 객체를 리턴하는지는 생성자 함수 동작 방식의 순서로 알아볼 수 있다. (생성자 함수 호출은 함수 호출에 앞서 new 키워드가 필수적으로 동반된다)</p><p><strong>1. 빈 객체 생성 및 this 바인딩</strong></p><blockquote><p>생성자 함수 호출 이후, 함수 내부에서 빈 객체를 생성하고 this를 해당 객체에 바인딩한다.</p></blockquote><p><strong>2. this를 통한 프로퍼티, 메서드 정의</strong></p><blockquote><p>생성자 함수 내부에서 this 키워드를 통해 해당 객체의 프로퍼티와 메서드를 정의할 수 있다.</p></blockquote><p><strong>3. 객체 return</strong></p><blockquote><p>프로퍼티와 메서드를 정의한 후, 별도의 return value를 명시하지 않으면 프로퍼티와 메서드를 정의한 해당 객체를 반환한다. 하지만, return value를 명시하면 해당 객체를 반환하지 않는다. 따라서 생성자 함수의 용도로 사용할 함수는 return value를 명시해선 안된다.</p></blockquote><p>다음은 생성자 함수를 통한 객체의 생성과 this 바인딩의 예시이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">introduce</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">gihan</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">"</span><span class="s2">gihan</span><span class="dl">"</span><span class="p">,</span> <span class="mi">23</span><span class="p">);</span>
<span class="nx">gihan</span><span class="p">.</span><span class="nx">introduce</span><span class="p">();</span>
<span class="c1">// result : Person {name: 'gihan', age: 23, introduce: ƒ}</span>
</pre></table></code></div></div><h4 id="applycallbind-호출"><span class="mr-2">apply/call/bind 호출</span><a href="#applycallbind-호출" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>this는 함수 호출 패턴에 따라 결정된다고 했는데, 앞서 살펴본 일반 함수, 메서드, 생성자 함수 호출은 자바스크립트에서 자동으로 this를 바인딩 해주는 방식이다. 이번에 살펴볼 apply/call/bind 함수는 개발자가 직접 this를 바인딩하여 사용할 수 있다. 아래는 예시로 사용할 test 함수와 obj 객체이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">apple</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">apple</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">banana</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">banana</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
</pre></table></code></div></div><p><strong>- apply</strong> 첫 번째 인자로 this를 바인딩 할 객체를, 두 번째 인자로 실제 함수의 인자들을 묶어 만든 배열을 넣어준다. 즉, apply 함수는 호출 시 this를 지정한 객체에 바인딩하여 즉시 호출하는 함수이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">test</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">apple</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">]);</span> <span class="c1">// a b {name: 'apple'}</span>
<span class="nx">test</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">banana</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">]);</span> <span class="c1">// a b {name: 'banana'}</span>
</pre></table></code></div></div><p><strong>- call</strong> apply와 같은 역할을 수행하지만, 실제 함수의 인자를 배열이 아닌 각각 하나의 인자로 넘길 수 있다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">test</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">apple</span><span class="p">,</span> <span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// a b {name: 'apple'}</span>
<span class="nx">test</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">banana</span><span class="p">,</span> <span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// a b {name: 'banana'}</span>
</pre></table></code></div></div><p><strong>- bind</strong> 인자로 this를 바인딩 할 객체를 넣는다. bind의 리턴 값은 this를 바인딩 시킨 함수 자체를 반환하기 때문에, 바인딩 한 함수를 저장시켜놓고 다시 호출하는 코드가 필요하다. 커링 방식으로도 동작할 수 있다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">appleCall</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">apple</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">BananaCall</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">banana</span><span class="p">);</span>
<span class="nx">appleCall</span><span class="p">(</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// a b {name: 'apple'}</span>
<span class="nx">BananaCall</span><span class="p">(</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// a b {name: 'banana'}</span>
</pre></table></code></div></div><h3 id="4-화살표-함수arrow-function의-this-바인딩"><span class="mr-2">[4] 화살표 함수(Arrow Function)의 this 바인딩</span><a href="#4-화살표-함수arrow-function의-this-바인딩" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>일반적으로 this는 함수 호출 패턴에 의해 실행 시간에 동적으로 결정되지만, 화살표 함수의 경우 this 바인딩이 조금 특이하다. 화살표 함수에서는 this를 무조건 상위 정적 스코프에 바인딩한다. 이를 Lexical this라고 한다. 아래 예시를 보자.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gihan</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">normal</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="na">arrow</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">normal</span><span class="p">();</span> <span class="c1">// {name: 'gihan', normal: ƒ, arrow: ƒ}</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">arrow</span><span class="p">();</span> <span class="c1">// Window {0: global, 1: global, 2: Window, 3: global, window: Window, …}</span>
</pre></table></code></div></div><p>arrow 메서드는 메서드 호출임에도 불구하고 window 전역 객체가 출력된 것을 확인할 수 있다. 이는 동적으로 this가 결정되는 것이 아니라 항상 상위 스코프에서 this가 정적으로 결정되기 때문이다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/javascript/'>JavaScript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >JavaScript</a> <a href="/tags/this/" class="post-tag no-text-decoration" >this</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JavaScript%27s+this+-+vgihan%27s+blog&url=https%3A%2F%2Fvgihan.github.io%2Fposts%2FJavaScript-this%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JavaScript%27s+this+-+vgihan%27s+blog&u=https%3A%2F%2Fvgihan.github.io%2Fposts%2FJavaScript-this%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fvgihan.github.io%2Fposts%2FJavaScript-this%2F&text=JavaScript%27s+this+-+vgihan%27s+blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/D3-icicle-chart-transition/">D3 Icicle Chart Transition</a><li><a href="/posts/VSCode-extension/">VSCode Extension 만들기</a><li><a href="/posts/HTTP/">HTTP</a><li><a href="/posts/HTTPS/">HTTPS</a><li><a href="/posts/Execution-Context/">Execution Context</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/extension/">Extension</a> <a class="post-tag" href="/tags/vscode/">VSCode</a> <a class="post-tag" href="/tags/async/">async</a> <a class="post-tag" href="/tags/bucket/">bucket</a> <a class="post-tag" href="/tags/container/">container</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Promise-all/"><div class="card-body"> <em class="small" data-ts="1657033200" data-df="ll" > Jul 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Promise.all</h3><div class="text-muted small"><p> 자바스크립트에서 비동기 작업을 처리하는 방법으로는 분류하자면 세 가지가 존재한다. 첫 번째는 콜백함수를 호출하는 것이고, 두 번째는 Promise.then, 마지막은 문법적으로 처리할 수 있는 async await 키워드를 이용한 방법이다. 사실, async await 키워드를 가지고 비동기 작업을 처리하면 매우 간단하다. Promise를 반환하는 ...</p></div></div></a></div><div class="card"> <a href="/posts/Execution-Context/"><div class="card-body"> <em class="small" data-ts="1655910000" data-df="ll" > Jun 23, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Execution Context</h3><div class="text-muted small"><p> 자바스크립트의 동작 원리를 담고 있는 자바스크립트의 핵심 원리. 실행 가능한 코드가 실행되기 위해 필요한 환경이다. 실행 컨텍스트의 생성 실행 컨텍스트는 프로그램이 실행될 때, 함수가 호출될 때 생성되며 콜스택이라고 하는 후입선출 구조에 push, pop 되며 실행 가능한 자바스크립트 코드의 실행이 일어난다. 전역 실행 컨텍스트 프로그램이 실행...</p></div></div></a></div><div class="card"> <a href="/posts/ESLint/"><div class="card-body"> <em class="small" data-ts="1656860400" data-df="ll" > Jul 4, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ESLint</h3><div class="text-muted small"><p> ESLint 란? ES + Lint 로써 ES는 Ecma Script 즉, 표준 JavaScript를 의미하고 Lint는 직역하면 보푸라기라는 뜻인데, 코드에서 보푸라기란 오류, 버그, 스타일 오류, 의심스러운 구조체 등이라고 한다. 따라서 ESLint는 JavaScript를 개발하는데 있어서 Type error나 import error 등을 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Linux-File-System/" class="btn btn-outline-primary" prompt="Older"><p>Linux File System</p></a> <a href="/posts/ESLint/" class="btn btn-outline-primary" prompt="Newer"><p>ESLint</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/vgihan">Kim Gihan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/extension/">Extension</a> <a class="post-tag" href="/tags/vscode/">VSCode</a> <a class="post-tag" href="/tags/async/">async</a> <a class="post-tag" href="/tags/bucket/">bucket</a> <a class="post-tag" href="/tags/container/">container</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
