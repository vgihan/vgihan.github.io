---
layout: post
title: HTTPS
author: vgihan
description: study HTTPS Protocol Handshake
tags: [network, https, web]
categories: [network]
extensions:
  preset: gfm
---

### HTTP

Hypertext Transfer Protocolλ΅, μΈν„°λ„·μ—μ„ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κΈ° μ„ν• κ·μ•½. κ°λ° μ‹ μ •ν•΄μ§„ HTTP κ·μ•½μ„ ν†µν•΄ ν†µμ‹ ν•  μ μλ‹¤.

### HTTPS

HTTP over Secure Socket Layerλ΅, SSL μ„μ—μ„ λ™μ‘ν•λ” HTTPλΌλ” μλ―Έ. HTTPλ” λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ λ• ν‰λ¬Έμ„ μ£Όκ³  λ°›κΈ° λ•λ¬Έμ— λ„μ²­ κ³µκ²©μ— λ§¤μ° μ·¨μ•½ν•κ³ , μ¬λ°”λ¥Έ μ‚¬μ©μλ΅ μ„μ¥ν•μ—¬ μ„λ²„μ λ¦¬μ†μ¤λ¥Ό νƒμ·¨ν•  μ μμ. κ·Έλ ‡κΈ° λ•λ¬Έμ— ν†µμ‹  μ‹ Application Layerμ™€ Transport Layer μ‚¬μ΄μ— μ΅΄μ¬ν•λ” SSLμ„ ν†µν•΄ μ•”νΈν™”ν•μ—¬ HTTP ν†µμ‹ ν•λ” HTTPSκ°€ λ‚μ¤κ² λ¨.

<p align="center"><img src="https://user-images.githubusercontent.com/49841765/174839694-530526aa-f629-4726-8298-b5aa6b7845f2.png"/></p>

### SSL ν†µμ‹  κ³Όμ •

1. **client hello (client β†’ server)** π™†β€β™‚οΈ
   - `λ¬΄μ‘μ„ λ°μ΄ν„°`, `κ°€λ¥ν• μ•”νΈν™” λ°©μ‹μ λ¦¬μ¤νΈ` μ „λ‹¬
2. **server hello (server β†’ client)** π™†β€β™‚οΈ
   - `λ¬΄μ‘μ„ λ°μ΄ν„°`, ν΄λΌμ΄μ–ΈνΈμ κ°€λ¥ν• μ•”νΈν™” λ°©μ‹ μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•μ—¬ ν•΄λ‹Ή `μ•”νΈν™” λ°©μ‹`μ„ μ „λ‹¬.
   - `μΈμ¦μ„` μ „λ‹¬
3. **CA check** β…

   - μΈμ¦μ„λ¥Ό μ „λ‹¬ λ°›μ€ ν΄λΌμ΄μ–ΈνΈλ” `λΈλΌμ°μ €μ— μ΅΄μ¬ν•λ” CAλ¦¬μ¤νΈ` μ¤‘ μ„λ²„μ CAκ°€ μ΅΄μ¬ν•λ” μ§€ κ²€μ‚¬.
   - μ΅΄μ¬ν•μ§€ μ•λ‹¤λ©΄, κ²½κ³  λ©”μ‹μ§€ μ „λ‹¬.
   - μ΅΄μ¬ν•λ‹¤λ©΄, λΈλΌμ°μ €μ— μ €μ¥λ ν•΄λ‹Ή CAμ `κ³µκ°ν‚¤`λ¥Ό μ΄μ©ν•μ—¬ μΈμ¦μ„ λ³µνΈν™”.
   - λ³µνΈν™”μ— μ„±κ³µν–λ‹¤λ©΄, CAκ°€ λ§λ” κ²ƒ μ΄λ―€λ΅ μ‹ λΆ°ν•  μ μμ.

4. **key change** π”‘
   - ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ λ¬΄μ‘μ„ λ°μ΄ν„°μ™€ ν΄λΌμ΄μ–ΈνΈμ λ¬΄μ‘μ„ λ°μ΄ν„°λ¥Ό μ΅°ν•©ν•μ—¬ λ°μ΄ν„°λ¥Ό κµν™ν•κΈ° μ„ν• `pre master secret`μ„ μƒμ„±.
   - pre master secretμ„ `CAμ κ³µκ°ν‚¤`λ΅ μ•”νΈν™” ν•μ—¬ μ„λ²„λ΅ μ „λ‹¬.

### SSL λ³΄μ•

HTTPSλ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κ³  μ„Έμ…μ„ ν•΄μ ν•λ” λ° κ±Έλ¦¬λ” μ‹κ°„μ€ λ§¤μ° μ§§μΌλ―€λ΅, λ€μΉ­ν‚¤λ¥Ό νƒμ·¨λ‹Ήν–λ‹¤κ³  ν•΄λ„ λ§¤μ° μ§§μ€ μ‹κ°„μ΄κΈ° λ•λ¬Έμ— λ€μΉ­ν‚¤λ¥Ό λ°”λ΅ νκΈ°ν•  μ μμ.

### μ™ κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν•μ§€ μ•κ³  λ€μΉ­ν‚¤λ¥Ό λ”°λ΅ λ§λ“¤κΉ?

κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ” μ‘μ—…μ€ λΉ„μ©μ΄ λ§μ΄ λ“¤μ–΄κ°. λ€μΉ­ν‚¤λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•κ³ , κ³µκ°ν‚¤λ¥Ό ν†µν•΄ λ€μΉ­ν‚¤λ¥Ό κµν™ν•λ” λ°©μ‹μ΄ λ” ν¨μ¨μ .
